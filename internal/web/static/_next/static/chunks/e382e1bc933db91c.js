(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},38171,e=>{"use strict";var t=e.i(43476);function s({label:e,value:s,icon:r,color:a="var(--brand)",trend:i}){return(0,t.jsxs)("div",{className:"card p-4 sm:p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[r&&(0,t.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:`color-mix(in srgb, ${a} 10%, transparent)`,color:a},children:r}),void 0!==i&&0!==i&&(0,t.jsxs)("span",{className:"flex items-center gap-0.5 text-xs font-semibold px-1.5 py-0.5 rounded-full",style:{color:i>0?"var(--success)":"var(--error)",background:i>0?"var(--success-muted)":"var(--error-muted)"},children:[(0,t.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:(0,t.jsx)("path",{d:i>0?"M5 2L8 6H2L5 2Z":"M5 8L2 4H8L5 8Z",fill:"currentColor"})}),Math.abs(i)]})]}),(0,t.jsx)("div",{className:"text-2xl sm:text-3xl font-display font-bold tabular-nums",style:{color:"var(--text-primary)"},children:s}),(0,t.jsx)("div",{className:"text-xs font-medium mt-1",style:{color:"var(--text-tertiary)"},children:e})]})}e.s(["default",()=>s])},37757,40803,e=>{"use strict";var t=e.i(43476);function s({title:e,description:s,badge:r,actions:a}){return(0,t.jsxs)("div",{className:"flex items-start sm:items-center justify-between mb-8 gap-4 flex-col sm:flex-row",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h1",{className:"font-display text-2xl sm:text-3xl font-bold tracking-tight",style:{color:"var(--text-primary)"},children:e}),r&&("string"==typeof r?(0,t.jsx)("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full",style:{background:"var(--brand-muted)",color:"var(--brand)"},children:r}):r)]}),(0,t.jsx)("p",{className:"text-sm mt-1.5",style:{color:"var(--text-secondary)"},children:s})]}),a&&(0,t.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:a})]})}function r({icon:e,title:s,description:r,action:a}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mb-5",style:{background:"var(--bg-tertiary)",color:"var(--text-tertiary)"},children:e}),(0,t.jsx)("h3",{className:"font-display text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:s}),(0,t.jsx)("p",{className:"text-sm max-w-sm leading-relaxed mb-6",style:{color:"var(--text-tertiary)"},children:r}),a]})}e.s(["default",()=>s],37757),e.s(["default",()=>r],40803)},88442,e=>{"use strict";var t=e.i(43476);function s({width:e="100%",height:s="16px"}){return(0,t.jsx)("div",{className:"skeleton",style:{width:e,height:s}})}function r(){return(0,t.jsxs)("div",{className:"card p-5 space-y-3",children:[(0,t.jsx)(s,{width:"40%",height:"12px"}),(0,t.jsx)(s,{width:"60%",height:"24px"}),(0,t.jsx)(s,{width:"80%",height:"12px"})]})}function a({rows:e=5}){return(0,t.jsxs)("div",{className:"card overflow-hidden",children:[(0,t.jsx)("div",{className:"px-5 py-3",style:{borderBottom:"1px solid var(--border)"},children:(0,t.jsx)(s,{width:"120px",height:"14px"})}),Array.from({length:e}).map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-4 px-5 py-3",style:{borderTop:r>0?"1px solid var(--border)":void 0},children:[(0,t.jsx)(s,{width:"60px",height:"12px"}),(0,t.jsx)(s,{width:"40%",height:"12px"}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)(s,{width:"80px",height:"12px"})]},r))]})}function i({height:e=120}){return(0,t.jsxs)("div",{className:"card p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(s,{width:"100px",height:"14px"}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)(s,{width:"60px",height:"12px"})]}),(0,t.jsx)("div",{className:"skeleton",style:{width:"100%",height:`${e}px`}})]})}e.s(["SkeletonCard",()=>r,"SkeletonChart",()=>i,"SkeletonLine",()=>s,"SkeletonTable",()=>a])},16715,e=>{"use strict";let t=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],16715)},96640,e=>{"use strict";var t=e.i(43476);function s({children:e,color:s="var(--brand)",variant:r="soft"}){let a={solid:{background:s,color:"white",border:"none"},soft:{background:`color-mix(in srgb, ${s} 10%, transparent)`,color:s,border:"none"},outline:{background:"transparent",color:s,border:`1px solid ${s}`}};return(0,t.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-semibold",style:a[r],children:e})}e.s(["default",()=>s])},31343,e=>{"use strict";let t=(0,e.i(75254).default)("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);e.s(["Play",()=>t],31343)},54947,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(46932),a=e.i(88653),i=e.i(63639),l=e.i(75254);let n=(0,l.default)("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);var o=e.i(31343),c=e.i(16715),d=e.i(27612);let x=(0,l.default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var m=e.i(72520),p=e.i(9165),u=e.i(37757),h=e.i(38171),y=e.i(96640),v=e.i(40803),f=e.i(88442);let b={hidden:{},show:{transition:{staggerChildren:.05}}},j={hidden:{opacity:0,y:10},show:{opacity:1,y:0}},g={SET:"#22c55e",DEL:"#ef4444",EXPIRE:"#f59e0b",HSET:"#0284c7",LPUSH:"#8b5cf6",RPUSH:"#8b5cf6",SADD:"#ec4899",ZADD:"#06b6d4"};function N(e){return g[e.toUpperCase()]||"#71717a"}function k(){let[e,l]=(0,s.useState)([]),[g,k]=(0,s.useState)(null),[w,C]=(0,s.useState)(!0),[S,T]=(0,s.useState)(!1),[R,z]=(0,s.useState)(""),L=(0,s.useRef)(null),M=(0,s.useCallback)(async()=>{C(!0);let e=await (0,p.getCDCEvents)();l(e.events||[]),k(e.stats||null),C(!1)},[]);(0,s.useEffect)(()=>{M()},[M]),(0,s.useEffect)(()=>()=>{L.current?.()},[]);let E=R?e.filter(e=>e.op.toUpperCase()===R.toUpperCase()):e,P=[...new Set(e.map(e=>e.op.toUpperCase()))];return(0,t.jsxs)(r.motion.div,{className:"max-w-6xl mx-auto px-4 sm:px-6 py-8",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35},children:[(0,t.jsx)(u.default,{title:"Change Data Capture",description:"Real-time event stream from database mutations",badge:S?(0,t.jsx)(y.default,{variant:"soft",color:"#22c55e",children:"● Streaming"}):(0,t.jsx)(y.default,{variant:"outline",color:"var(--text-tertiary)",children:"Paused"}),actions:(0,t.jsxs)(t.Fragment,{children:[S?(0,t.jsxs)("button",{onClick:()=>{L.current?.(),L.current=null,T(!1)},className:"btn-secondary !px-3 !py-1.5 !text-xs",style:{color:"var(--error)"},children:[(0,t.jsx)(n,{size:14})," Stop"]}):(0,t.jsxs)("button",{onClick:()=>{L.current||(T(!0),L.current=(0,p.subscribeCDC)(e=>{l(t=>[e,...t].slice(0,500))}))},className:"btn-primary !px-3 !py-1.5 !text-xs",children:[(0,t.jsx)(o.Play,{size:14})," Stream"]}),(0,t.jsx)("button",{onClick:M,className:"btn-secondary !px-3 !py-1.5 !text-xs",children:(0,t.jsx)(c.RefreshCw,{size:14,className:w?"animate-spin":""})}),(0,t.jsx)("button",{onClick:()=>l([]),className:"btn-secondary !px-3 !py-1.5 !text-xs",style:{color:"var(--error)"},children:(0,t.jsx)(d.Trash2,{size:14})})]})}),w?(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",children:Array.from({length:4}).map((e,s)=>(0,t.jsx)(f.SkeletonCard,{},s))}):g?(0,t.jsxs)(r.motion.div,{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8",variants:b,initial:"hidden",animate:"show",children:[(0,t.jsx)(r.motion.div,{variants:j,children:(0,t.jsx)(h.default,{icon:(0,t.jsx)(i.Radio,{size:16}),label:"Total Events",value:g.total_events.toLocaleString(),color:"#f59e0b"})}),(0,t.jsx)(r.motion.div,{variants:j,children:(0,t.jsx)(h.default,{icon:(0,t.jsx)(m.ArrowRight,{size:16}),label:"Buffer Size",value:`${g.buffer_size} / ${g.buffer_cap}`,color:"#0284c7"})}),(0,t.jsx)(r.motion.div,{variants:j,children:(0,t.jsx)(h.default,{icon:(0,t.jsx)(i.Radio,{size:16}),label:"Subscribers",value:String(g.subscribers),color:"#22c55e"})}),(0,t.jsx)(r.motion.div,{variants:j,children:(0,t.jsx)(h.default,{icon:(0,t.jsx)(x,{size:16}),label:"Displayed",value:`${E.length} events`,color:"#8b5cf6"})})]}):null,P.length>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-5 flex-wrap",children:[(0,t.jsx)("span",{className:"text-xs font-semibold",style:{color:"var(--text-tertiary)"},children:"Filter:"}),(0,t.jsx)("button",{onClick:()=>z(""),className:"px-2.5 py-1 rounded-lg text-xs font-mono transition-colors",style:{background:R?"var(--bg-secondary)":"var(--brand-muted)",color:R?"var(--text-secondary)":"var(--brand)"},children:"All"}),P.map(e=>(0,t.jsx)("button",{onClick:()=>z(R===e?"":e),className:"px-2.5 py-1 rounded-lg text-xs font-mono transition-colors",style:{background:R===e?`color-mix(in srgb, ${N(e)} 15%, transparent)`:"var(--bg-secondary)",color:R===e?N(e):"var(--text-secondary)"},children:e},e))]}),(0,t.jsxs)("div",{className:"card overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-3",style:{borderBottom:"1px solid var(--border)"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,t.jsx)(i.Radio,{size:16,style:{color:S?"#22c55e":"var(--text-tertiary)"},className:S?"animate-pulse":""}),(0,t.jsx)("h3",{className:"text-sm font-display font-bold",style:{color:"var(--text-primary)"},children:"Event Feed"})]}),(0,t.jsx)(y.default,{variant:"outline",color:"var(--text-tertiary)",children:E.length})]}),w?(0,t.jsx)(f.SkeletonTable,{rows:6}):E.length?(0,t.jsx)("div",{className:"divide-y",style:{borderColor:"var(--border)",maxHeight:"calc(100vh - 460px)",overflowY:"auto"},children:(0,t.jsx)(a.AnimatePresence,{initial:!1,children:E.slice(0,200).map(e=>(0,t.jsxs)(r.motion.div,{className:"flex items-center gap-4 px-5 py-3 transition-colors text-sm",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0},onMouseEnter:e=>e.currentTarget.style.background="var(--bg-secondary)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,t.jsx)(y.default,{variant:"soft",color:N(e.op),children:e.op.toUpperCase()}),(0,t.jsx)("span",{className:"font-mono text-xs font-semibold",style:{color:"var(--text-primary)"},children:e.key}),e.value&&(0,t.jsx)("span",{className:"text-xs font-mono truncate max-w-[200px]",style:{color:"var(--text-tertiary)"},children:e.value}),(0,t.jsx)("span",{className:"ml-auto text-xs tabular-nums",style:{color:"var(--text-tertiary)"},children:e.ts?new Date(e.ts).toLocaleTimeString():"—"})]},e.id))})}):(0,t.jsx)(v.default,{icon:(0,t.jsx)(i.Radio,{size:28}),title:"No events captured",description:S?"Waiting for database mutations…":"Start streaming or perform some database operations to capture events."})]})]})}e.s(["default",()=>k],54947)}]);