(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37757,40803,e=>{"use strict";var s=e.i(43476);function t({title:e,description:t,badge:a,actions:l}){return(0,s.jsxs)("div",{className:"flex items-start sm:items-center justify-between mb-8 gap-4 flex-col sm:flex-row",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("h1",{className:"font-display text-2xl sm:text-3xl font-bold tracking-tight",style:{color:"var(--text-primary)"},children:e}),a&&("string"==typeof a?(0,s.jsx)("span",{className:"text-[11px] font-semibold px-2 py-0.5 rounded-full",style:{background:"var(--brand-muted)",color:"var(--brand)"},children:a}):a)]}),(0,s.jsx)("p",{className:"text-sm mt-1.5",style:{color:"var(--text-secondary)"},children:t})]}),l&&(0,s.jsx)("div",{className:"flex items-center gap-2 flex-shrink-0",children:l})]})}function a({icon:e,title:t,description:a,action:l}){return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mb-5",style:{background:"var(--bg-tertiary)",color:"var(--text-tertiary)"},children:e}),(0,s.jsx)("h3",{className:"font-display text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:t}),(0,s.jsx)("p",{className:"text-sm max-w-sm leading-relaxed mb-6",style:{color:"var(--text-tertiary)"},children:a}),l]})}e.s(["default",()=>t],37757),e.s(["default",()=>a],40803)},88442,e=>{"use strict";var s=e.i(43476);function t({width:e="100%",height:t="16px"}){return(0,s.jsx)("div",{className:"skeleton",style:{width:e,height:t}})}function a(){return(0,s.jsxs)("div",{className:"card p-5 space-y-3",children:[(0,s.jsx)(t,{width:"40%",height:"12px"}),(0,s.jsx)(t,{width:"60%",height:"24px"}),(0,s.jsx)(t,{width:"80%",height:"12px"})]})}function l({rows:e=5}){return(0,s.jsxs)("div",{className:"card overflow-hidden",children:[(0,s.jsx)("div",{className:"px-5 py-3",style:{borderBottom:"1px solid var(--border)"},children:(0,s.jsx)(t,{width:"120px",height:"14px"})}),Array.from({length:e}).map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 px-5 py-3",style:{borderTop:a>0?"1px solid var(--border)":void 0},children:[(0,s.jsx)(t,{width:"60px",height:"12px"}),(0,s.jsx)(t,{width:"40%",height:"12px"}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(t,{width:"80px",height:"12px"})]},a))]})}function r({height:e=120}){return(0,s.jsxs)("div",{className:"card p-5",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(t,{width:"100px",height:"14px"}),(0,s.jsx)("div",{className:"flex-1"}),(0,s.jsx)(t,{width:"60px",height:"12px"})]}),(0,s.jsx)("div",{className:"skeleton",style:{width:"100%",height:`${e}px`}})]})}e.s(["SkeletonCard",()=>a,"SkeletonChart",()=>r,"SkeletonLine",()=>t,"SkeletonTable",()=>l])},16715,e=>{"use strict";let s=(0,e.i(75254).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>s],16715)},96640,e=>{"use strict";var s=e.i(43476);function t({children:e,color:t="var(--brand)",variant:a="soft"}){let l={solid:{background:t,color:"white",border:"none"},soft:{background:`color-mix(in srgb, ${t} 10%, transparent)`,color:t,border:"none"},outline:{background:"transparent",color:t,border:`1px solid ${t}`}};return(0,s.jsx)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-md text-xs font-semibold",style:l[a],children:e})}e.s(["default",()=>t])},27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>s],3116)},52786,e=>{"use strict";let s=(0,e.i(75254).default)("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);e.s(["HardDrive",()=>s],52786)},7233,e=>{"use strict";let s=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>s],7233)},67240,e=>{"use strict";let s=(0,e.i(75254).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);e.s(["RotateCcw",()=>s],67240)},78583,e=>{"use strict";let s=(0,e.i(75254).default)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);e.s(["FileText",()=>s],78583)},76401,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(46932),l=e.i(88653),r=e.i(68553),i=e.i(7233),n=e.i(67240),c=e.i(27612),o=e.i(52786),d=e.i(3116),x=e.i(78583),p=e.i(16715),h=e.i(9165),m=e.i(8776),y=e.i(37757),u=e.i(96640),j=e.i(40803),f=e.i(88442);function v(e){return e>=1e9?`${(e/1e9).toFixed(2)} GB`:e>=1e6?`${(e/1e6).toFixed(1)} MB`:e>=1e3?`${(e/1e3).toFixed(1)} KB`:`${e} B`}function b(e){return e?new Date(e).toLocaleString():"—"}function g(){let{showToast:e}=(0,m.useToast)(),[g,k]=(0,t.useState)([]),[N,w]=(0,t.useState)(!0),[C,S]=(0,t.useState)(!1),[z,T]=(0,t.useState)(!1),[M,$]=(0,t.useState)(""),[F,R]=(0,t.useState)(null),[D,P]=(0,t.useState)(null),B=(0,t.useCallback)(async()=>{w(!0),k(await (0,h.listSnapshots)()),w(!1)},[]);(0,t.useEffect)(()=>{B()},[B]);let L=async()=>{let s=M.trim()||`snapshot-${Date.now()}`;S(!0),await (0,h.createSnapshot)(s),e(`Snapshot "${s}" created`,"success"),T(!1),$(""),S(!1),B()},H=async s=>{await (0,h.restoreSnapshot)(s),e(`Restored snapshot "${s}"`,"success"),P(null)},A=async s=>{await (0,h.deleteSnapshot)(s),e(`Deleted snapshot "${s}"`,"success"),R(null),B()},_=g.reduce((e,s)=>e+s.size_bytes,0);return(0,s.jsxs)(a.motion.div,{className:"max-w-5xl mx-auto px-4 sm:px-6 py-8",initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.35},children:[(0,s.jsx)(y.default,{title:"Snapshots",description:"Create and manage database snapshots",badge:(0,s.jsxs)(u.default,{variant:"soft",color:"#8b5cf6",children:[(0,s.jsx)(r.Camera,{size:12})," Persistence"]}),actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>T(!0),className:"btn-primary !px-3 !py-1.5 !text-xs",children:[(0,s.jsx)(i.Plus,{size:14})," Create Snapshot"]}),(0,s.jsx)("button",{onClick:B,className:"btn-secondary !px-3 !py-1.5 !text-xs",children:(0,s.jsx)(p.RefreshCw,{size:14,className:N?"animate-spin":""})})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"card p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, #8b5cf6 10%, transparent)"},children:(0,s.jsx)(r.Camera,{size:18,style:{color:"#8b5cf6"}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:"Snapshots"}),(0,s.jsx)("p",{className:"font-display font-bold text-lg",style:{color:"var(--text-primary)"},children:g.length})]})]}),(0,s.jsxs)("div",{className:"card p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, #0284c7 10%, transparent)"},children:(0,s.jsx)(o.HardDrive,{size:18,style:{color:"#0284c7"}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:"Total Size"}),(0,s.jsx)("p",{className:"font-display font-bold text-lg",style:{color:"var(--text-primary)"},children:v(_)})]})]}),(0,s.jsxs)("div",{className:"card p-4 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center",style:{background:"color-mix(in srgb, #22c55e 10%, transparent)"},children:(0,s.jsx)(d.Clock,{size:18,style:{color:"#22c55e"}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs",style:{color:"var(--text-tertiary)"},children:"Latest"}),(0,s.jsx)("p",{className:"font-display font-bold text-sm",style:{color:"var(--text-primary)"},children:g.length?b(g[0].created_at):"—"})]})]})]}),(0,s.jsxs)("div",{className:"card overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5 px-5 py-3",style:{borderBottom:"1px solid var(--border)"},children:[(0,s.jsx)(r.Camera,{size:16,style:{color:"var(--brand)"}}),(0,s.jsx)("h3",{className:"text-sm font-display font-bold",style:{color:"var(--text-primary)"},children:"All Snapshots"})]}),N?(0,s.jsx)(f.SkeletonTable,{rows:4}):g.length?(0,s.jsx)("div",{className:"divide-y",style:{borderColor:"var(--border)"},children:g.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 px-5 py-4 transition-colors",onMouseEnter:e=>e.currentTarget.style.background="var(--bg-secondary)",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"color-mix(in srgb, #8b5cf6 8%, transparent)"},children:(0,s.jsx)(x.FileText,{size:16,style:{color:"#8b5cf6"}})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-mono font-semibold truncate",style:{color:"var(--text-primary)"},children:e.id}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-0.5 text-xs",style:{color:"var(--text-tertiary)"},children:[(0,s.jsx)("span",{children:b(e.created_at)}),(0,s.jsx)("span",{children:"·"}),(0,s.jsx)("span",{children:v(e.size_bytes)}),e.file_path&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"·"}),(0,s.jsx)("span",{className:"truncate max-w-[200px]",children:e.file_path})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[D===e.id?(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("button",{onClick:()=>H(e.id),className:"btn-primary !px-2.5 !py-1 !text-xs",children:"Confirm"}),(0,s.jsx)("button",{onClick:()=>P(null),className:"btn-secondary !px-2.5 !py-1 !text-xs",children:"Cancel"})]}):(0,s.jsxs)("button",{onClick:()=>P(e.id),className:"btn-secondary !px-2.5 !py-1 !text-xs",children:[(0,s.jsx)(n.RotateCcw,{size:12})," Restore"]}),F===e.id?(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("button",{onClick:()=>A(e.id),className:"btn-primary !px-2.5 !py-1 !text-xs",style:{background:"var(--error)"},children:"Delete"}),(0,s.jsx)("button",{onClick:()=>R(null),className:"btn-secondary !px-2.5 !py-1 !text-xs",children:"Cancel"})]}):(0,s.jsx)("button",{onClick:()=>R(e.id),className:"btn-secondary !px-2.5 !py-1 !text-xs",style:{color:"var(--error)"},children:(0,s.jsx)(c.Trash2,{size:12})})]})]},e.id))}):(0,s.jsx)(j.default,{icon:(0,s.jsx)(r.Camera,{size:28}),title:"No snapshots",description:"Create your first snapshot to persist the current database state.",action:(0,s.jsxs)("button",{onClick:()=>T(!0),className:"btn-primary !text-xs",children:[(0,s.jsx)(i.Plus,{size:14})," Create Snapshot"]})})]}),(0,s.jsx)(l.AnimatePresence,{children:z&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:()=>T(!1),children:[(0,s.jsx)(a.motion.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{background:"var(--modal-overlay)",backdropFilter:"blur(4px)"}}),(0,s.jsxs)(a.motion.div,{className:"relative w-full max-w-md rounded-xl p-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},style:{background:"var(--bg-elevated)",border:"1px solid var(--border)",boxShadow:"var(--shadow-xl)"},onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("h3",{className:"font-display text-lg font-bold mb-4",style:{color:"var(--text-primary)"},children:"Create Snapshot"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs font-semibold mb-1.5 block",style:{color:"var(--text-secondary)"},children:"Name (optional)"}),(0,s.jsx)("input",{value:M,onChange:e=>$(e.target.value),className:"input-field",placeholder:`snapshot-${Date.now()}`,onKeyDown:e=>"Enter"===e.key&&L(),autoFocus:!0})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-5",children:[(0,s.jsx)("button",{onClick:()=>T(!1),className:"btn-secondary !text-xs",children:"Cancel"}),(0,s.jsx)("button",{onClick:L,disabled:C,className:"btn-primary !text-xs disabled:opacity-50",children:C?"Creating…":"Create"})]})]})]})})]})}e.s(["default",()=>g])}]);